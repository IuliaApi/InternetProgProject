<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop - TechHub Store</title>
    <link rel="stylesheet" href="css/styles.css">    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></head>
<body>
    <!-- Skip to main content link for keyboard users -->
    <a href="#main-content" class="skip-to-main-content">Skip to main content</a>
    
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container navbar-container">
            <div class="logo">TechHub</div>
            
            <!-- Search Bar -->
            <div class="search-bar">
                <form onsubmit="handleSearch(event)" class="search-form" role="search">
                    <label for="searchInput" class="sr-only">Search products</label>
                    <input type="text" id="searchInput" placeholder="Search products..." class="search-input" autocomplete="off" aria-label="Search products by name or category">
                    <button type="submit" class="search-btn" aria-label="Search">üîç</button>
                </form>
                <div id="searchSuggestions" class="search-suggestions" style="display: none;" role="region" aria-live="polite" aria-label="Search suggestions"></div>
            </div>
            
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="products.html" class="active">Shop</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li id="cartNavItem" style="display: none;"><a href="cart.html" class="cart-link"><span class="cart-icon">üõí</span> Cart <span class="cart-count">0</span></a></li>
                <li><a href="comparison.html" class="comparison-link" title="Compare products">
                    <i class="fas fa-balance-scale"></i> Compare
                    <span class="comparison-badge" style="display: none;"></span>
                </a></li>
                <li><button type="button" class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode" title="Toggle dark mode">üåô</button></li>
                <li id="authNavItem" class="auth-nav-item">
                    <a href="login.html" class="auth-btn">Login</a>
                    <div id="userDropdown" class="user-dropdown" style="display: none;">
                        <div class="user-dropdown-header">
                            <span id="userNameDisplay"></span>
                        </div>
                        <a href="profile.html" class="dropdown-item">üë§ Profile</a>
                        <a href="cart.html" class="dropdown-item">üõí Cart</a>
                        <button type="button" class="dropdown-item logout-btn" onclick="handleLogout()">üö™ Logout</button>
                    </div>
                </li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>Our Products</h1>
            <p>Browse our complete collection of premium electronics</p>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container shopping-container">
        <aside class="sidebar">
            <div class="filter-section">
                <h3>Filters</h3>
                
                <div class="filter-group">
                    <label class="filter-title" for="category-audio">Category</label>
                    <div class="filter-options" role="group" aria-labelledby="category-audio">
                        <label><input type="checkbox" name="category" value="audio"> Audio</label>
                        <label><input type="checkbox" name="category" value="wearables"> Wearables</label>
                        <label><input type="checkbox" name="category" value="video"> Video</label>
                        <label><input type="checkbox" name="category" value="accessories"> Accessories</label>
                        <label><input type="checkbox" name="category" value="computing"> Computing</label>
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-title" for="price-range">Price Range</label>
                    <input type="range" id="price-range" min="0" max="1000" value="1000" class="price-range" aria-label="Maximum price filter">
                    <div class="price-display">
                        <span>$0 - $<span id="priceValue">1000</span></span>
                    </div>
                </div>

                <div class="filter-group">
                    <label class="filter-title" for="rating-5">Rating</label>
                    <div class="filter-options" role="group" aria-labelledby="rating-5">
                        <label><input type="checkbox" name="rating" value="5"> ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (5 stars)</label>
                        <label><input type="checkbox" name="rating" value="4"> ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ (4+ stars)</label>
                        <label><input type="checkbox" name="rating" value="3"> ‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ (3+ stars)</label>
                    </div>
                </div>

                <button type="button" class="btn btn-primary" id="resetFiltersBtn" style="width: 100%; margin-top: 15px;">Reset Filters</button>
            </div>
        </aside>

        <main class="products-section">
            <div class="shop-header">
                <div class="sort-container">
                    <label for="sort">Sort by:</label>
                    <select id="sort">
                        <option value="popular">Most Popular</option>
                        <option value="newest">Newest</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="rating">Highest Rated</option>
                    </select>
                </div>
                <div class="view-toggle">
                    <button type="button" class="view-btn grid-view active" data-view="grid">‚äû Grid</button>
                    <button type="button" class="view-btn list-view" data-view="list">‚â° List</button>
                </div>
            </div>

            <div id="categoryInfo" style="margin-bottom: 20px; color: var(--text-light); font-size: 0.95rem;">
                <!-- Category and product count will be displayed here -->
            </div>

            <div class="products-grid" id="productsContainer">
                <!-- Products will be populated by JavaScript -->
            </div>
        </main>
    </div>

    <!-- Comparison System -->
    <script>
    // Simple comparison system
    window.simpleComparison = {
        list: [],
        init: function() {
            this.load();
            console.log('Simple comparison initialized, list:', this.list);
        },
        load: function() {
            try {
                const data = localStorage.getItem('techhub-comparison');
                this.list = data ? JSON.parse(data) : [];
            } catch(e) {
                this.list = [];
            }
        },
        save: function() {
            try {
                localStorage.setItem('techhub-comparison', JSON.stringify(this.list));
            } catch(e) {}
        },
        add: function(id) {
            id = Number(id);
            if (!this.list.includes(id)) {
                if (this.list.length < 4) {
                    this.list.push(id);
                    this.save();
                    this.updateUI();
                    return true;
                }
            }
            return false;
        },
        remove: function(id) {
            id = Number(id);
            this.list = this.list.filter(x => x !== id);
            this.save();
            this.updateUI();
        },
        toggle: function(id) {
            id = Number(id);
            if (this.list.includes(id)) {
                this.remove(id);
            } else {
                this.add(id);
            }
        },
        updateUI: function() {
            // Update badge
            const badge = document.querySelector('.comparison-badge');
            if (badge) {
                if (this.list.length > 0) {
                    badge.textContent = this.list.length;
                    badge.style.display = 'flex';
                } else {
                    badge.style.display = 'none';
                }
            }
            // Update buttons
            document.querySelectorAll('.compare-btn').forEach(btn => {
                const id = Number(btn.dataset.productId);
                if (this.list.includes(id)) {
                    btn.innerHTML = '‚úì In Comparison';
                    btn.classList.add('active');
                } else {
                    btn.innerHTML = 'Add to Compare';
                    btn.classList.remove('active');
                }
            });
        }
    };
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            window.simpleComparison.init();
            window.simpleComparison.updateUI();
        });
    } else {
        window.simpleComparison.init();
        window.simpleComparison.updateUI();
    }
    </script>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>About TechHub</h4>
                <p>Your trusted destination for premium tech products and accessories.</p>
            </div>
            <div class="footer-section">
                <h4>Quick Links</h4>
                <ul>
                    <li><a href="products.html">Shop</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Newsletter</h4>
                <p>Subscribe for updates and exclusive offers</p>
                <form onsubmit="subscribeNewsletter(event)" class="newsletter-form">
                    <input type="email" placeholder="Your email" required>
                    <button type="submit">Subscribe</button>
                </form>
            </div>
            <div class="footer-section">
                <h4>Follow Us</h4>
                <div class="social-links">
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 TechHub Store. All rights reserved.</p>
        </div>
    </footer>

    <script src="js/cart-manager.js"></script>
    <script src="js/comparison-manager.js"></script>
    <script src="js/product-renderer.js"></script>
    <script src="js/filters-sorter.js"></script>
    <script src="js/form-validator.js"></script>
    <script src="js/search-manager.js"></script>
    <script src="js/ui-components.js"></script>
    <script src="js/script.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/products.js"></script>
    <script src="js/dark-mode.js"></script></body>
</html>
